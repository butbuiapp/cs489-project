
<!-- Appointment Information -->
<div class="appointment-details">
  <p>
    <strong>Date:</strong> {{ (appointment().date | date: 'MM/dd/yyyy') + ' ' + appointment().time}}
    <span class="ms-5">
      <strong>Customer:</strong> {{ appointment().customer.firstName + ' ' + appointment().customer.lastName }}
    </span>
    <span class="ms-5">
      <strong>Technician:</strong> {{ appointment().technician.firstName + ' ' + appointment().technician.lastName }}
    </span>
  </p>
  <p><strong>Notes:</strong> {{ appointment().notes }}</p>
  <button class="btn btn-info" (click)="toggleInvoice(appointment().id)">
    {{ showInvoiceMap[appointment().id] ? 'Hide Invoice' : 'View Invoice' }}
  </button>
</div>

<!-- Collapsible Invoice Section -->
<div *ngIf="showInvoiceMap[appointment().id]" class="invoice-details">
  <div class="card card-body">
    <!-- Invoice Details -->
    <h5>Invoice Details</h5>
    <p><strong>Issued Date:</strong> {{ appointment().invoice?.issuedDate | date: 'short' }}</p>
    <p><strong>Total Amount:</strong> {{ appointment().invoice?.totalAmount | currency }}</p>
    <p><strong>Status:</strong> {{ appointment().invoice?.status }}</p>
    <p *ngIf="appointment().invoice?.paidDate"><strong>Paid Date:</strong> {{ appointment().invoice?.paidDate | date: 'short' }}</p>
    <div *ngIf="appointment().invoice?.services">
      <strong>Services:</strong>
      <ul>
        <li *ngFor="let service of appointment().invoice?.services">{{ service.name }} - {{ service.price | currency }}</li>
      </ul>
    </div>
  </div>
</div>